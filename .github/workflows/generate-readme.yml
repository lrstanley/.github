name: generate-readme

on:
  workflow_call:
    inputs:
      path:
        description: "The path to the README.md file."
        required: false
        default: "README.md"
        type: string
    secrets:
      token:
        description: "User-based personal access token."
        required: false
      app-id:
        description: "GitHub App ID."
        required: false
      app-private-key:
        description: "GitHub App private key."
        required: false

jobs:
  generate:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lrstanley/.github/composite/generate-readme@master
        with:
          app-id: ${{ secrets.app-id || secrets.BOT_APP_ID }}
          app-private-key: ${{ secrets.app-private-key || secrets.BOT_PRIVATE_KEY }}
          token: ${{ secrets.token || secrets.USER_PAT || secrets.GITHUB_TOKEN }}
